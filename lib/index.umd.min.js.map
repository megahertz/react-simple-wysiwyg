{"version":3,"file":"index.umd.min.js","sources":["../src/utils.ts","../src/editor/ContentEditable.tsx","../src/editor/EditorContext.tsx","../src/editor/HtmlEditor.tsx","../src/editor/Editor.tsx","../src/toolbar/buttons.tsx","../src/toolbar/icons/BoldButton.tsx","../src/toolbar/icons/UnorderedListIcon.tsx","../src/toolbar/icons/AlignLeft.tsx","../src/toolbar/icons/AlignCenter.tsx","../src/toolbar/icons/AlignRight.tsx","../src/toolbar/icons/ItalicButton.tsx","../src/toolbar/icons/OrderedListIcon.tsx","../src/toolbar/icons/UnderLIneButton.tsx","../src/toolbar/dropdowns.tsx","../src/toolbar/Separator.tsx","../src/toolbar/Toolbar.tsx","../src/editor/DefaultEditor.tsx","../src/toolbar/HtmlButton.tsx"],"sourcesContent":["export function getSelectedNode(): Node | undefined {\n  if ((document as any).selection) {\n    return (document as any).selection.createRange().parentElement();\n  }\n\n  const selection = window.getSelection();\n  if (selection && selection.rangeCount > 0) {\n    return selection.getRangeAt(0).startContainer.parentNode || undefined;\n  }\n\n  return undefined;\n}\n\nexport function normalizeHtml(str: string | undefined): string {\n  return str ? str.replace(/&nbsp;|\\u202F|\\u00A0/g, ' ') : '';\n}\n\nexport function replaceCaret(el: HTMLElement) {\n  // Place the caret at the end of the element\n  const target = document.createTextNode('');\n  el.appendChild(target);\n\n  // do not move caret if element was not focused\n  const isTargetFocused = document.activeElement === el;\n  if (target !== null && target.nodeValue !== null && isTargetFocused) {\n    const sel = window.getSelection();\n    if (sel !== null) {\n      const range = document.createRange();\n      range.setStart(target, target.nodeValue.length);\n      range.collapse(true);\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n    if (el instanceof HTMLElement) el.focus();\n  }\n}\n","import React from 'react';\nimport type {\n  FocusEvent,\n  ForwardedRef,\n  HTMLAttributes,\n  KeyboardEvent,\n  SyntheticEvent,\n} from 'react';\nimport { normalizeHtml, replaceCaret } from '../utils';\n\n/**\n * Based on https://github.com/lovasoa/react-contenteditable\n * A simple component for a html element with editable contents.\n */\nexport const ContentEditable = React.memo(\n  React.forwardRef(function ContentEditable(\n    { className, disabled, tagName, value = '', ...rest }: ContentEditableProps,\n    ref: ForwardedRef<HTMLElement>,\n  ) {\n    const elRef = React.useRef<HTMLElement>();\n    const htmlRef = React.useRef(value);\n    const restRef = React.useRef(rest);\n\n    React.useEffect(() => {\n      restRef.current = rest;\n      const el = elRef.current;\n      if (el && normalizeHtml(htmlRef.current) !== normalizeHtml(value)) {\n        htmlRef.current = value;\n        el.innerHTML = value;\n        replaceCaret(el);\n      }\n    });\n\n    return React.useMemo(() => {\n      function onSetRef($el: HTMLElement) {\n        elRef.current = $el;\n        if (typeof ref === 'function') {\n          ref($el);\n        } else if (typeof ref === 'object' && ref) {\n          // eslint-disable-next-line no-param-reassign\n          ref.current = $el;\n        }\n      }\n\n      function onChange(event: SyntheticEvent<any>) {\n        const el = elRef.current;\n        if (!el) {\n          return;\n        }\n\n        const elementHtml = el.innerHTML;\n        if (elementHtml !== htmlRef.current) {\n          restRef.current.onChange?.({\n            ...event,\n            target: {\n              value: elementHtml,\n              name: rest.name,\n            } as any,\n          });\n        }\n\n        htmlRef.current = elementHtml;\n      }\n\n      return React.createElement(tagName || 'div', {\n        ...rest,\n        className,\n        contentEditable: !disabled,\n        dangerouslySetInnerHTML: { __html: value },\n        onBlur: (e: FocusEvent<HTMLElement>) =>\n          (restRef.current.onBlur || onChange)(e),\n        onInput: onChange,\n        onKeyDown: (e: KeyboardEvent<HTMLElement>) =>\n          (restRef.current.onKeyDown || onChange)(e),\n        onKeyUp: (e: KeyboardEvent<HTMLElement>) =>\n          (restRef.current.onKeyUp || onChange)(e),\n        ref: onSetRef,\n      });\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [className, disabled, tagName]);\n  }),\n);\n\nexport type ContentEditableEvent = SyntheticEvent<any, Event> & {\n  target: { name?: string; value: string };\n};\n\nexport interface ContentEditableProps extends HTMLAttributes<HTMLElement> {\n  disabled?: boolean;\n  contentEditableRef?: (el: HTMLElement) => void;\n  name?: string;\n  onChange?: (event: ContentEditableEvent) => void;\n  tagName?: string;\n  value?: string;\n}\n","import type { ReactNode } from 'react';\nimport React from 'react';\n\nexport const EditorContext = React.createContext<EditorState | undefined>(\n  undefined,\n);\n\nexport function EditorProvider({ children }: { children: ReactNode }) {\n  const [state, setState] = React.useState<EditorState>({\n    htmlMode: false,\n    update,\n  });\n\n  function update(attrs: EditorState) {\n    setState((prevState) => {\n      return {\n        ...prevState,\n        ...attrs,\n        date: Date.now(),\n      };\n    });\n  }\n\n  return (\n    <EditorContext.Provider value={state}>{children}</EditorContext.Provider>\n  );\n}\n\nexport function useEditorState(): EditorState {\n  const context = React.useContext(EditorContext);\n  if (!context) {\n    throw new Error('You should wrap your component by EditorProvider');\n  }\n\n  return context;\n}\n\nexport interface EditorState {\n  update(attrs: Partial<EditorState>): void;\n  $el?: HTMLElement;\n  $selection?: Node;\n  htmlMode: boolean;\n}\n","import React from 'react';\n\nexport function HtmlEditor({ ...rest }) {\n  return <textarea {...rest} />;\n}\n","import type { ComponentProps, SyntheticEvent } from 'react';\nimport React from 'react';\nimport { getSelectedNode } from '../utils';\nimport { ContentEditable, ContentEditableProps } from './ContentEditable';\nimport { useEditorState } from './EditorContext';\nimport { HtmlEditor } from './HtmlEditor';\nimport '../styles.css';\n\nexport function Editor({\n  children,\n  containerProps,\n  onSelect,\n  ...rest\n}: EditorProps) {\n  const editorState = useEditorState();\n\n  React.useEffect(() => {\n    document.addEventListener('click', onClickOutside);\n    return () => document.removeEventListener('click', onClickOutside);\n  });\n\n  function onClickOutside(event: MouseEvent) {\n    if (event.target === editorState.$el) {\n      return;\n    }\n\n    if (editorState.$el?.contains(event.target as HTMLElement)) {\n      return;\n    }\n\n    editorState.update({ $selection: undefined });\n  }\n\n  function onTextSelect(event: SyntheticEvent<HTMLElement>) {\n    onSelect?.(event);\n    editorState.update({ $selection: getSelectedNode() });\n  }\n\n  function setContentEditableRef($el: HTMLElement) {\n    editorState.update({ $el });\n  }\n\n  if (editorState.htmlMode) {\n    return (\n      <div className=\"rsw-editor\" {...containerProps}>\n        {children}\n        <HtmlEditor {...rest} className=\"rsw-ce rsw-html\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"rsw-editor\" {...containerProps}>\n      {children}\n      <ContentEditable\n        {...rest}\n        ref={setContentEditableRef}\n        onSelect={onTextSelect}\n        className=\"rsw-ce\"\n      />\n    </div>\n  );\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface EditorProps extends ContentEditableProps {\n  containerProps?: ComponentProps<'div'>;\n}\n","import React from 'react';\nimport type { HTMLAttributes, MouseEvent, ReactNode } from 'react';\nimport { EditorState, useEditorState } from '../editor/EditorContext';\nimport OrderedListIcon from './icons/OrderedListIcon';\nimport UnorderedListIcon from './icons/UnorderedListIcon';\nimport BoldButton from './icons/BoldButton';\nimport ItalicButton from './icons/ItalicButton';\nimport UnderLIneButton from './icons/UnderLIneButton';\nimport AlignLeft from './icons/AlignLeft';\nimport AlignCenter from './icons/AlignCenter';\nimport AlignRight from './icons/AlignRight';\n\nexport const BtnBold = createButton('Bold', <BoldButton/>, 'bold');\n\nexport const BtnBulletList = createButton(\n  'Bullet list',\n  <UnorderedListIcon />,\n  'insertUnorderedList',\n);\nexport const BtnAligenLeft = createButton('Aligen left', <AlignLeft/> , 'justifyLeft');\nexport const BtnAlignCenter = createButton('Align center', <AlignCenter/>, 'justifyCenter');\nexport const BtnAlignRight = createButton('Aligen right', <AlignRight/> ,'justifyRight');\n// const toolbar = document.querySelector('.toolbar');\n\n\n\nexport const BtnClearFormatting = createButton(\n  'Clear formatting',\n  'TÃ≤‚Çì',\n  'removeFormat',\n);\n\nexport const BtnItalic = createButton('Italic', <ItalicButton/>, 'italic');\n\nexport const BtnStrikeThrough = createButton(\n  'Strike through',\n  <s>ab</s>,\n  'strikeThrough',\n);\n\nexport const BtnLink = createButton('Link', 'üîó', ({ $selection }) => {\n  if ($selection?.nodeName === 'A') {\n    document.execCommand('unlink');\n  } else {\n    // eslint-disable-next-line no-alert\n    document.execCommand('createLink', false, prompt('URL', '') || undefined);\n  }\n});\n\nexport const BtnNumberedList = createButton(\n  'Numbered list',\n  <OrderedListIcon />,\n  'insertOrderedList',\n);\n\nexport const BtnRedo = createButton('Redo', '‚Ü∑', 'redo');\n\nexport const BtnUnderline = createButton(\n  'Underline',\n  <UnderLIneButton/>,\n  'underline',\n);\n\nexport const BtnUndo = createButton('Undo', '‚Ü∂', 'undo');\n\nexport function createButton(\n  title: string,\n  content: ReactNode,\n  command: ((state: EditorState) => void) | string,\n) {\n  ButtonFactory.displayName = title.replace(/\\s/g, '');\n\n  return ButtonFactory;\n\n  function ButtonFactory(props: HTMLAttributes<HTMLButtonElement>) {\n    const editorState = useEditorState();\n    const { $el, $selection } = editorState;\n\n    let active = false;\n    if (typeof command === 'string') {\n      active = !!$selection && document.queryCommandState(command);\n    }\n\n    function onAction(e: MouseEvent<HTMLButtonElement>) {\n      e.preventDefault();\n\n      if (document.activeElement !== $el) {\n        $el?.focus();\n      }\n\n      if (typeof command === 'function') {\n        command(editorState);\n      } else {\n        document.execCommand(command);\n      }\n    }\n\n    if (editorState.htmlMode) {\n      return null;\n    }\n\n    return (\n      <button\n        type=\"button\"\n        title={title}\n        {...props}\n        className=\"rsw-btn\"\n        onMouseDown={onAction}\n        data-active={active}\n      >\n        {content}\n      </button>\n    );\n  }\n}\n","import React from 'react';\n\nexport default function BoldButton() {\n  return (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M11.374 7.47935C11.7773 6.96067 11.9974 6.32302 12 5.66602C12 4.01202 10.654 2.66602 9 2.66602H4V12.666H9.33333C10.9873 12.666 12.3333 11.32 12.3333 9.66602C12.3324 9.25515 12.2468 8.84889 12.0817 8.47264C11.9166 8.09639 11.6757 7.75824 11.374 7.47935ZM9 4.66602C9.55133 4.66602 10 5.11468 10 5.66602C10 6.21735 9.55133 6.66602 9 6.66602H6V4.66602H9ZM9.33333 10.666H6V8.66602H9.33333C9.88467 8.66602 10.3333 9.11468 10.3333 9.66602C10.3333 10.2173 9.88467 10.666 9.33333 10.666Z\" fill=\"#393F63\"/>\n    </svg>\n    \n      \n  );\n}\n","import React from 'react';\n\nexport default function UnorderedListIcon() {\n  return (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M2.66669 4H4.00002V5.33333H2.66669V4ZM2.66669 7.33333H4.00002V8.66667H2.66669V7.33333ZM2.66669 10.6667H4.00002V12H2.66669V10.6667ZM13.3334 5.33333V4H5.34869V5.33333H12.5334H13.3334ZM5.33335 7.33333H13.3334V8.66667H5.33335V7.33333ZM5.33335 10.6667H13.3334V12H5.33335V10.6667Z\" fill=\"#393F63\"/>\n</svg>\n\n\n\n  );\n}\n","import React from 'react';\n\nexport default function AlignLeft() {\n  return (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M2.6665 12.6667H13.3332V14H2.6665V12.6667ZM2.6665 10H9.99984V11.3333H2.6665V10ZM2.6665 7.33333H13.3332V8.66667H2.6665V7.33333ZM2.6665 2H13.3332V3.33333H2.6665V2ZM2.6665 4.66667H9.99984V6H2.6665V4.66667Z\" fill=\"#393F63\"/>\n</svg>\n\n    \n      \n  );\n}\n","import React from 'react';\n\nexport default function AlignCenter() {\n  return (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M2.6665 12.6667H13.3332V14H2.6665V12.6667ZM4.6665 10H11.3332V11.3333H4.6665V10ZM2.6665 7.33333H13.3332V8.66667H2.6665V7.33333ZM2.6665 2H13.3332V3.33333H2.6665V2ZM4.6665 4.66667H11.3332V6H4.6665V4.66667Z\" fill=\"#393F63\"/>\n    </svg>\n    \n\n    \n      \n  );\n}\n","import React from 'react';\n\nexport default function AlignRight() {\n  return (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M2.6665 12.6667H13.3332V14H2.6665V12.6667ZM5.99984 10H13.3332V11.3333H5.99984V10ZM2.6665 7.33333H13.3332V8.66667H2.6665V7.33333ZM2.6665 2H13.3332V3.33333H2.6665V2ZM5.99984 4.66667H13.3332V6H5.99984V4.66667Z\" fill=\"#393F63\"/>\n</svg>\n\n\n    \n      \n  );\n}\n","import React from 'react';\n\nexport default function ItalicButton() {\n  return (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M12.6667 4.66602V2.66602H6.00004V4.66602H7.91204L6.00804 11.3327H3.33337V13.3327H10V11.3327H8.08804L9.99204 4.66602H12.6667Z\" fill=\"#393F63\"/>\n</svg>\n\n\n    \n  );\n}\n","import React from 'react';\n\nexport default function OrderedListIcon() {\n  return (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M3.52135 8.04332C3.23602 8.26198 3.04135 8.44932 2.93802 8.61065C2.83469 8.77065 2.77202 8.94265 2.75202 9.12265H4.53802V8.62398H3.60869C3.66269 8.56998 3.71002 8.52332 3.75002 8.48998C3.79135 8.45665 3.87135 8.39532 3.99069 8.30998C4.19269 8.16465 4.33135 8.02998 4.40802 7.90732C4.48535 7.78332 4.52335 7.65732 4.52335 7.52198C4.52517 7.40063 4.49007 7.2816 4.42269 7.18065C4.35654 7.07856 4.26067 6.99922 4.14802 6.95332C4.03202 6.90265 3.86869 6.87932 3.65935 6.87932C3.45935 6.87932 3.30135 6.90465 3.18869 6.95532C3.08017 7.0024 2.98823 7.08088 2.92469 7.18065C2.86202 7.27598 2.81869 7.41132 2.79535 7.58332L3.39135 7.63398C3.40802 7.50865 3.44069 7.42265 3.48935 7.37132C3.51376 7.34719 3.54286 7.32835 3.57486 7.31597C3.60686 7.30358 3.64107 7.29791 3.67535 7.29932C3.74869 7.29932 3.80869 7.32265 3.85669 7.37132C3.88006 7.39335 3.89855 7.42004 3.91096 7.44967C3.92336 7.4793 3.9294 7.5112 3.92869 7.54332C3.92457 7.61494 3.89954 7.68378 3.85669 7.74132C3.80735 7.80932 3.69602 7.91065 3.52135 8.04332ZM3.55802 12.3007C3.48861 12.3028 3.42111 12.2777 3.37002 12.2307C3.32069 12.184 3.28469 12.1007 3.26202 11.9787L2.66669 12.0573C2.70602 12.1933 2.76135 12.3053 2.83402 12.3947C2.90669 12.4833 2.99935 12.5513 3.11202 12.5987C3.22402 12.6447 3.37802 12.6673 3.57335 12.6673C3.77335 12.6673 3.93402 12.636 4.05669 12.574C4.17558 12.5146 4.27402 12.421 4.33935 12.3053C4.40469 12.1887 4.43669 12.0693 4.43669 11.9427C4.43913 11.8518 4.41897 11.7618 4.37802 11.6807C4.33864 11.6093 4.28145 11.5493 4.21202 11.5067C4.15254 11.4727 4.08825 11.448 4.02135 11.4333C4.11319 11.3867 4.19217 11.3183 4.25135 11.234C4.30172 11.1585 4.32799 11.0694 4.32669 10.9787C4.32792 10.9025 4.31167 10.8271 4.2792 10.7582C4.24672 10.6893 4.19888 10.6288 4.13935 10.5813C4.01469 10.4753 3.81269 10.4227 3.53335 10.4227C3.29002 10.4227 3.10135 10.4707 2.96869 10.5687C2.83535 10.664 2.74602 10.804 2.69935 10.986L3.26202 11.0867C3.27735 10.9787 3.30669 10.904 3.35069 10.8613C3.39469 10.8187 3.45135 10.796 3.52202 10.796C3.55141 10.7946 3.58077 10.7992 3.60836 10.8094C3.63596 10.8196 3.66123 10.8352 3.68269 10.8553C3.72202 10.8953 3.74069 10.948 3.74069 11.014C3.74069 11.0833 3.71535 11.1427 3.66269 11.194C3.61002 11.2453 3.54469 11.2687 3.46735 11.2687C3.44145 11.2679 3.41561 11.2654 3.39002 11.2613L3.36002 11.694C3.42234 11.6732 3.48711 11.6606 3.55269 11.6567C3.64069 11.6567 3.71069 11.684 3.76135 11.7407C3.81269 11.7953 3.83802 11.8733 3.83802 11.9753C3.83802 12.0727 3.81135 12.1527 3.75869 12.2113C3.73367 12.2398 3.70278 12.2625 3.66814 12.278C3.6335 12.2934 3.59593 12.3011 3.55802 12.3007ZM4.19002 5.57865V3.33398H3.69735C3.63713 3.46848 3.54734 3.58766 3.43469 3.68265C3.32269 3.77732 3.16535 3.85732 2.96269 3.92598V4.42865C3.19059 4.36579 3.40318 4.25688 3.58735 4.10865V5.57932H4.19002V5.57865ZM6.00002 4.00065H13.3334V5.33398H6.00002V4.00065ZM6.00002 7.33398H13.3334V8.66732H6.00002V7.33398ZM6.00002 10.6673H13.3334V12.0007H6.00002V10.6673Z\" fill=\"#393F63\"/>\n</svg>\n\n\n    \n  );\n}\n","import React from 'react';\n\nexport default function UnderLIneButton() {\n  return (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M3.33337 11.9993H12.6667V13.3327H3.33337V11.9993ZM4.00004 2.66602V6.66602C4.00004 8.87202 5.79404 10.666 8.00004 10.666C10.206 10.666 12 8.87202 12 6.66602V2.66602H10.6667V6.66602C10.6667 8.13668 9.47071 9.33268 8.00004 9.33268C6.52937 9.33268 5.33337 8.13668 5.33337 6.66602V2.66602H4.00004Z\" fill=\"#393F63\"/>\n</svg>\n\n    \n  );\n}\n","import React from 'react';\nimport type { ChangeEvent, FC, HTMLAttributes } from 'react';\nimport { EditorState, useEditorState } from '../editor/EditorContext';\n\nexport const BtnStyles = createDropdown('Styles', [\n  ['Normal', 'formatBlock', 'DIV'],\n  ['ùóõùó≤ùóÆùó±ùó≤ùóø ùü≠', 'formatBlock', 'H1'],\n  ['Header 2', 'formatBlock', 'H2'],\n  ['ùô≤ùöòùöçùöé', 'formatBlock', 'PRE'],\n]);\n\nexport function createDropdown(\n  title: string,\n  items: DropDownItem[],\n): FC<DropDownFactoryProps> {\n  DropdownFactory.displayName = title;\n\n  return DropdownFactory;\n\n  function DropdownFactory(props: DropDownFactoryProps) {\n    const editorState = useEditorState();\n    const { $el, $selection, htmlMode } = editorState;\n\n    if (htmlMode) {\n      return null;\n    }\n\n    const activeIndex = items.findIndex(\n      (item) => item[1] === 'formatBlock' && $selection?.nodeName === item[2],\n    );\n\n    return (\n      <Dropdown\n        {...props}\n        onChange={onChange}\n        title={title}\n        items={items}\n        selected={activeIndex}\n      />\n    );\n\n    function onChange(e: ChangeEvent<HTMLSelectElement>) {\n      const target = e.target;\n      const selectedValue = target.value;\n      const selectedIndex = parseInt(selectedValue, 10);\n\n      const [, command, commandArgument] = items[selectedIndex];\n\n      e.preventDefault();\n\n      if (document.activeElement !== $el) {\n        $el?.focus();\n      }\n\n      if (typeof command === 'function') {\n        command(editorState);\n      } else {\n        document.execCommand(command, false, commandArgument);\n      }\n\n      setTimeout(() => (target.value = selectedValue), 10);\n    }\n  }\n}\n\nexport function Dropdown({ items, selected, ...inputProps }: DropdownProps) {\n  return (\n    <select {...inputProps} value={selected} className=\"rsw-dd\">\n      <option hidden>{inputProps.title}</option>\n      {items.map((item, index) => (\n        <option key={item[2]} value={index}>\n          {item[0]}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nexport type DropDownItem = [\n  string,\n  string | ((editorState: EditorState) => void),\n  string,\n];\n\nexport interface DropDownFactoryProps\n  extends HTMLAttributes<HTMLSelectElement> {\n  selected?: number;\n}\n\nexport interface DropdownProps extends DropDownFactoryProps {\n  items: DropDownItem[];\n}\n","import React from 'react';\nimport { useEditorState } from '../editor/EditorContext';\n\nexport function Separator() {\n  const editorState = useEditorState();\n\n  if (editorState.htmlMode) {\n    return null;\n  }\n\n  return <div className=\"rsw-separator\" />;\n}\n","import React from 'react';\nimport { HTMLAttributes } from 'react';\nexport const tolllll = document.querySelector('.rsw-toolbar');\n\nexport function Toolbar(props: HTMLAttributes<HTMLDivElement>) {\n  return <div {...props} className=\"rsw-toolbar\" />;\n}\n","import React from 'react';\nimport { Editor, EditorProps } from './Editor';\nimport { EditorProvider } from './EditorContext';\nimport {\n  BtnAligenLeft,\n  BtnAlignCenter,\n  BtnAlignRight,\n  BtnBold,\n  BtnBulletList,\n  BtnClearFormatting,\n  BtnItalic,\n  BtnLink,\n  BtnNumberedList,\n  BtnRedo,\n  BtnStrikeThrough,\n  BtnStyles,\n  BtnUnderline,\n  BtnUndo,\n  HtmlButton,\n  Separator,\n  Toolbar,\n} from '../toolbar';\n\n\nexport function DefaultEditor(props: EditorProps) {\n  return (\n    <EditorProvider>\n      <Editor {...props}>\n        <Toolbar>\n          <BtnBold />\n          <BtnItalic />\n          <BtnUnderline />\n          <Separator />\n          <BtnBulletList />\n          <BtnNumberedList />\n          <Separator />\n          <BtnAligenLeft/>\n          <BtnAlignCenter/>\n          <BtnAlignRight/>\n        </Toolbar>\n      </Editor>\n    </EditorProvider>\n  );\n}\n","import React from 'react';\nimport { useEditorState } from '../editor/EditorContext';\n\nexport function HtmlButton({ ...rest }) {\n  const editorState = useEditorState();\n\n  function onClick() {\n    editorState.update({\n      htmlMode: !editorState.htmlMode,\n    });\n  }\n\n  return (\n    <button\n      type=\"button\"\n      title=\"HTML mode\"\n      className=\"rsw-btn\"\n      onClick={onClick}\n      data-active={editorState.htmlMode}\n      {...rest}\n    >\n      &lt;/&gt;\n    </button>\n  );\n}\n"],"names":["getSelectedNode","document","selection","createRange","parentElement","window","getSelection","rangeCount","getRangeAt","startContainer","parentNode","normalizeHtml","str","replace","ContentEditable","React","memo","forwardRef","_a","ref","className","disabled","tagName","_b","value","rest","__rest","elRef","useRef","htmlRef","restRef","useEffect","current","el","innerHTML","target","createTextNode","appendChild","isTargetFocused","activeElement","nodeValue","sel","range","setStart","length","collapse","removeAllRanges","addRange","HTMLElement","focus","replaceCaret","useMemo","onChange","event","elementHtml","call","__assign","name","createElement","contentEditable","dangerouslySetInnerHTML","__html","onBlur","e","onInput","onKeyDown","onKeyUp","$el","EditorContext","createContext","undefined","EditorProvider","children","useState","htmlMode","update","attrs","setState","prevState","date","Date","now","state","Provider","useEditorState","context","useContext","Error","HtmlEditor","Editor","containerProps","onSelect","editorState","onClickOutside","contains","$selection","addEventListener","removeEventListener","BtnBold","createButton","width","height","viewBox","fill","xmlns","d","BtnBulletList","BtnAligenLeft","BtnAlignCenter","BtnAlignRight","BtnClearFormatting","BtnItalic","BtnStrikeThrough","BtnLink","nodeName","execCommand","prompt","BtnNumberedList","BtnRedo","BtnUnderline","BtnUndo","title","content","command","ButtonFactory","displayName","props","active","queryCommandState","type","onMouseDown","preventDefault","BtnStyles","createDropdown","items","DropdownFactory","activeIndex","findIndex","item","Dropdown","selectedValue","selectedIndex","parseInt","commandArgument","setTimeout","selected","inputProps","hidden","map","index","key","Separator","tolllll","querySelector","Toolbar","DefaultEditor","onClick"],"mappings":"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"}